---
title: Bonnes pratiques pour les projets statistiques
subtitle: |
  **[2Ã¨me partie : formation aux bonnes pratiques en R]{.orange}**
author: |
  [Romain Avouac](https://github.com/avouacr),
  [Thomas Faria](https://github.com/ThomasFaria),
  [Lino Galiana](https://www.linogaliana.fr/),
  [Olivier Meslin](https://github.com/oliviermeslin),
  [Tom Seimandi](https://github.com/tomseimandi/)
# date: 
slide-number: true
footer: |
  Bonnes pratiques pour les projets statistiques
# uncomment for French presentations:
#lang: fr-FR
# for blind readers:
slide-tone: false
# for @olevitt:
chalkboard: # press the B key to toggle chalkboard
  theme: whiteboard
# uncomment to use the multiplex mode:
#multiplex: true
format:
  # pick the light mode (onyxia-revealjs) or the dark mode (onyxia-dark-revealjs)
  onyxia-revealjs:
  #onyxia-dark-revealjs:
    output-file: index.html
controls: true
css: custom.css
from: markdown+emoji
bibliography: references.bib
---




# Introduction

## La notion de bonnes pratiques

- [**Origine**]{.blue2} : communautÃ© des dÃ©veloppeurs logiciels

::: {.incremental}
- [**Constats**]{.blue2} :
    - le [_"code est plus souvent lu qu'Ã©crit"_]{.green2} ([Guido Van Rossum](https://fr.wikipedia.org/wiki/Guido_van_Rossum))
    - la maintenance d'un code est trÃ¨s coÃ»teuse
:::

. . .

- [**ConsÃ©quence**]{.blue2} : un ensemble de [**rÃ¨gles informelles**]{.orange},
conventionnellement acceptÃ©es comme produisant des logiciels [**fiables**]{.orange}, [**Ã©volutifs**]{.orange} et [**maintenables**]{.orange}


## Pourquoi s'intÃ©resser aux bonnes pratiques ? {.smaller}

<br>

L'activitÃ© du statisticien / *datascientist* tend Ã  se rapprocher de celle du dÃ©veloppeur :

. . .

- projets [**intenses en code**]{.orange}

. . .

- [**projets collaboratifs**]{.orange} et de grande envergure

. . .


- [**complexification**]{.orange} des donnÃ©es et donc des [**infrastructures**]{.orange}

. . .

- [**dÃ©ploiement**]{.orange} d'applications pour valoriser les analyses

## Bonnes pratiques et reproductibilitÃ© {.smaller}

![](img/reprospectrum.png){height="200" fig-align="center"}

**Source** : Peng R., Reproducible Research in Computational Science, Science (2011)

. . .

- Une reproductibilitÃ© parfaite est [**coÃ»teuse**]{.orange}

. . .

- `Git` est un [**standard atteignable**]{.orange} et [**efficient**]{.orange}

. . .

::: {.callout-note}
**Quel socle de bonnes pratiques pour les projets statistiques en `R` ?**
:::

## Plan de la formation

AmÃ©liorations graduelles dans l'Ã©chelle de la reproductibilitÃ© :

:one: QualitÃ© du code

. . .

:two: Structure des projets

. . .

:three: Formats de donnÃ©es

. . .

:four: Environnements reproductibles

. . .

:five: *Pipelines* de donnÃ©es

. . .

:six: Publication reproductible

. . .


{{< include applications/_application0.qmd >}}


# I- QualitÃ© du code

## Enjeux

- D'une vision utilitariste du code Ã  une vision du code comme [**outil de communication**]{.orange}

. . .

- Favoriser la [**lisibilitÃ©**]{.orange} et la [**maintenabilitÃ©**]{.orange}

. . .

- Faciliter la [**rÃ©utilisation**]{.orange}

. . .

- Assurer la [__transparence__]{.orange} mÃ©thodologique

## Principes gÃ©nÃ©raux

1. Adopter les [**standards communautaires**]{.orange}

. . .

2. Utiliser des [**fonctions**]{.orange}

. . .

3. [**Documenter**]{.orange} son code

. . .

4. Indiquer les _packages_ utilisÃ©s afin d'Ã©viter les [**conflits**]{.orange}


## :one: Adopter les standards communautaires

> *"Good coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread"*
>
> [Tidyverse Style Guide](https://style.tidyverse.org/)

. . .

- Respecter les [conventions]{.orange} du langage dans lequel il est rÃ©digÃ©

. . .

- Il existe un **guide de rÃ©fÃ©rence** pour bien coder en `R` : le [Tidyverse style guide](https://style.tidyverse.org/index.html).


## :one: Adopter les standards communautaires {.smaller}

Deux outils pratiques aident Ã  respecter les standards :

1. [**_linter_**]{.orange} : programme qui vÃ©rifie que le code est __formellement__ conforme Ã  un certain _guidestyle_
    + signale problÃ¨mes formels, sans corriger 

. . .

2. [**_formatter_**]{.orange} : programme qui reformate un code pour le rendre conforme Ã  un certain _guidestyle_
    + modifie directement le code

. . .

::: {.callout-tip}

- [Exemples dâ€™erreurs repÃ©rÃ©es]{.blue2} par un _linter_ : 
    + lignes de code trop longues ou mal indentÃ©es, parenthÃ¨ses non Ã©quilibrÃ©es, noms de fonctions mal construitsâ€¦
- [Exemples dâ€™erreurs __non__ repÃ©rÃ©es]{.blue2} par un _linter_ :
    + fonctions mal utilisÃ©es, arguments mal spÃ©cifiÃ©s, structure du code incohÃ©rente, code insuffisamment documentÃ©â€¦
:::


## :one: Adopter les standards communautaires {.smaller}

<br>

Dans le cas de {{< fa brands r-project >}} : 

- le [_linter_]{.orange} Ã  utiliser est le _package_ [`lintr`](https://github.com/r-lib/lintr);
- le [_formatter_]{.orange} Ã  utiliser est le _package_ [`styler`](https://github.com/r-lib/styler).
    + Existe Ã©galement le _package_ [`formatR`](https://github.com/yihui/formatR).

## :two: Utiliser des fonctions {.smaller}

::: {.callout-important}
## RÃ¨gle d'or

Il faut utiliser une [**fonction**]{.red2} dÃ¨s qu'on utilise une mÃªme
portion de code plus de deux fois ([**_don't repeat yourself_ (DRY)**]{.red2})
:::

- [Limite les risques d'erreurs]{.orange} liÃ©s aux copier/coller
- Rend le code [plus lisible]{.orange} et [plus compact]{.orange}
- [Un seul endroit]{.orange} du code Ã  modifier lorsqu'on souhaite modifier le traitement
- Facilite la [rÃ©utilisation]{.orange} et la [documentation]{.orange} du code !

. . .

::: {.callout-tip}
## RÃ¨gles pour Ã©crire des fonctions **pertinentes**

- Une tÃ¢che = une fonction ;
- Une tÃ¢che complexe = un enchaÃ®nement de fonctions rÃ©alisant chacune une tÃ¢che simple ;
- Limiter l'utilisation de variables globales.

:::

## :three: Documenter son code

- Grands principes :
  - Documenter le [__pourquoi__]{.orange} plutÃ´t que le [__comment__]{.orange} ;
  - PrivilÃ©gier l'auto-documentation via des [**nommages pertinents**]{.orange}.

. . .

::: {.callout-tip}
## Comment bien documenter un script ?

- [**Minimum**]{.orange} ğŸš¦ : commentaire au dÃ©but du script pour dÃ©crire ce qu'il fait ;
- [**Bien**]{.orange} ğŸ‘ : commenter les parties "dÃ©licates" du code ;
- [**IdÃ©al**]{.orange} ğŸ’ª : documenter ses fonctions avec la syntaxe `roxygen2`.

:::


## :four: Pas d'ambiguÃ¯tÃ© sur les _packages_ utilisÃ©s {.smaller}

- Deux fonctions peuvent avoir le [__mÃªme nom__]{.orange} dans des [__packages diffÃ©rents__]{.orange}

. . .

- `R` utilise par dÃ©faut la librairie chargÃ©e le plus rÃ©cemment

. . .

- Erreurs difficiles Ã  repÃ©rer car il est nÃ©cessaire d'exÃ©cuter le code

. . .

- Recommandation : indiquer explicitement le _package_ : notation `package::fonction()`
    + Exemple : `dplyr::filter()`

:::{.callout-tip}
## Exemple
- `package1` et `package2` contiennent chacun une fonction appelÃ©e `superFonction`.
- Si `package2` est chargÃ© aprÃ¨s `package1`, alors `superFonction` dÃ©signe par dÃ©faut la fonction de `package2`.
- Mieux vaut noter `package1::superFonction` et `package2::superFonction`
:::


## Ressources supplÃ©mentaires

<br>

- [_R Packages_](https://r-pkgs.org/man.html) par Hadley Wickham and Jenny Bryan
- Une [prÃ©sentation trÃ¨s bien faite](https://mitmat.github.io/slides/2022-05-26-egu/code-data-open-science.html#1)
- [Un cours complet](https://eliocamp.github.io/reproducibility-with-r/) sur la reproductibilitÃ© avec `R`
- L'Ã©quivalent `Python` en [3A d'ENSAE](https://ensae-reproductibilite.netlify.app/about/)


{{< include applications/_application1.qmd >}}


# II- Structure des projets

## Enjeux

1. Favoriser la [**lisibilitÃ©**]{.orange} et la [**maintenabilitÃ©**]{.orange}

. . .

2 Construire des projets [**reproductibles**]{.orange}

## :warning: A ne pas reproduire chez vous

<br>

```
â”œâ”€â”€ report.Rmd
â”œâ”€â”€ correlation.png
â”œâ”€â”€ data.csv
â”œâ”€â”€ data2.csv
â”œâ”€â”€ fig1.png
â”œâ”€â”€ figure 2 (copy).png
â”œâ”€â”€ report.pdf
â”œâ”€â”€ partial data.csv
â”œâ”€â”€ script.R
â””â”€â”€ script_final.R
```

Source : [eliocamp.github.io](https://eliocamp.github.io/reproducibility-with-r/materials/day1/02-projects/)

## Principes gÃ©nÃ©raux

1. Utiliser les [**projets RStudio**]{.orange}

. . .

2. Organiser son projet en [**sous-dossiers**]{.orange}

. . .

3. Donner des [**noms pertinents**]{.orange} aux fichiers

. . .

4. [**Documenter**]{.orange} son projet

. . .

5. (Faire de son projet un [**package**]{.orange})

## :one: Utiliser les projets RStudio

::: {.incremental}
- [**Objectif**]{.orange} : favoriser la [**reproductibilitÃ©**]{.blue2}
  - Tous les fichiers nÃ©cessaires au projet dans un mÃªme dossier ;
  - Le dossier contenant le projet RStudio est automatiquement utilisÃ© comme ***working directory*** ;
  - Utilisation de [**chemins relatifs**]{.blue2} plutÃ´t qu'absolus.
:::

. . .

- **Bonus** : en utilisant `Git`, on s'assure de toujours travailler dans un projet RStudio !

## :two: Organiser son projet en sous-dossiers

- [**Objectif**]{.orange} : adopter une structure arbitraire, mais [**lisible**]{.blue2} et [**cohÃ©rente**]{.blue2}

```
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ raw
â”‚   â”‚   â”œâ”€â”€ data.csv
â”‚   â”‚   â””â”€â”€ data2.csv
â”‚   â””â”€â”€ derived
â”‚       â””â”€â”€ partial data.csv
â”œâ”€â”€ R
|   â”œâ”€â”€ script.R
â”‚   â”œâ”€â”€ script_final.R
â”‚   â””â”€â”€ report.Rmd
â””â”€â”€ output
    â”œâ”€â”€ fig1.png
    â”œâ”€â”€ figure 2 (copy).png
    â”œâ”€â”€ figure10.png
    â”œâ”€â”€ correlation.png
    â””â”€â”€ report.pdf
```

## :three: Donner des noms pertinents aux fichiers

- [**Objectif**]{.orange} : [**auto-documenter**]{.blue2} son projet

```
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ raw
â”‚   â”‚   â”œâ”€â”€ dpe_logement_202103.csv
â”‚   â”‚   â””â”€â”€ dpe_logement_202003.csv
â”‚   â””â”€â”€ derived
â”‚       â””â”€â”€ dpe_logement_merged_preprocessed.csv
â”œâ”€â”€ R
|   â”œâ”€â”€ preprocessing.R
â”‚   â”œâ”€â”€ generate_plots.R
â”‚   â””â”€â”€ report.Rmd
â””â”€â”€ output
    â”œâ”€â”€ histogram_energy_diagnostic.png
    â”œâ”€â”€ barplot_consumption_pcs.png
    â”œâ”€â”€ correlation_matrix.png
    â””â”€â”€ report.pdf
```

## :four: Documenter son projet

- Le fichier `README.md`, situÃ© Ã  la racine du projet, est Ã  la fois la **carte d'identitÃ©** et la **vitrine du projet**

::: {.incremental}
- IdÃ©alement, il contient :
  - Une [**prÃ©sentation**]{.orange} du contexte et des objectifs
  - Une description de son [**fonctionnement**]{.orange}
  - Un guide de [**contribution**]{.orange} (*open-source*)
:::

. . .

- Quelques modÃ¨les de `README.md` complets :
  - [utilitR](https://github.com/InseeFrLab/utilitR/blob/master/README.md)
  - [DoReMIFaSol](https://github.com/InseeFrLab/DoReMIFaSol)

## :five: Faire de son projet un *package*

::: {.incremental}
- Un *package* est la forme maximale de [**modularitÃ©**]{.orange}
  - Contient des [**fonctions**]{.blue2} rangÃ©es dans des [**modules**]{.blue2}
  - Contient Ã©galement de la [**documentation**]{.blue2}, des [**tests**]{.blue2}, des (mÃ©ta-)donnÃ©es... 

- [**Avantages**]{.orange}
  - IdÃ©al pour favoriser la [**rÃ©utilisation**]{.blue2} du code
  - Des [**outils**]{.blue2} de dÃ©veloppement : `devtools` et `usethis`

- [**InconvÃ©nients**]{.orange}
  - CoÃ»t de [**maintenance**]{.blue2} Ã©levÃ©
:::

## Ressources supplÃ©mentaires

<br>

- La documentation [utilitR](https://www.book.utilitr.org/rproject.html)
- [eliocamp.github.io](https://eliocamp.github.io/reproducibility-with-r/materials/day1/02-projects/)


{{< include applications/_application2.qmd >}}


## Bilan de l'application 2

::: {.incremental}
- Un code mal structurÃ©
  - Limite la lisibilitÃ© du projet
  - Est trÃ¨s coÃ»teux Ã  maintenir (dette technique)
:::

. . .

::: {layout="[80,30]"}

![](https://www.earthdatascience.org/images/earth-analytics/clean-code/reproducible-science-is-about-being-lazy-hadley-wickham.png)

:::


{{< include applications/_application3.qmd >}}


# III- Formats de donnÃ©es

## Enjeux

::: {.incremental}
- Le choix d'un format de donnÃ©es rÃ©pond Ã  un [**arbitrage**]{.orange} entre plusieurs critÃ¨res :
  - [**FinalitÃ©**]{.blue2} (traitement, analyse, diffusion)
  - [**Public cible**]{.blue2}
  - [**VolumÃ©trie**]{.blue2}
:::

## Recommandations {.smaller}

- Eviter impÃ©rativement les formats de donnÃ©es adhÃ©rents Ã  un langage (`RDS`, `RData`, `fst`, `sas7bdat`, etc.).

::: {.incremental}
- Deux formats Ã  privilÃ©gier :
  - [**CSV**]{.orange} : pour la [**plupart des usages courants**]{.blue2}
    - _Avantage_ : [**non-compressÃ©**]{.blue2} donc facilement [**lisible**]{.blue2}
    - _InconvÃ©nients_ : pas de gestion des mÃ©ta-donnÃ©es, peu adaptÃ© aux donnÃ©es volumineuses
  - [**Parquet**]{.orange} : pour le traitement de [**donnÃ©es volumineuses**]{.blue2}
    - [**CompressÃ©**]{.blue2} et trÃ¨s [**performant**]{.blue2} en lecture/Ã©criture
    - Gestion native des mÃ©ta-donnÃ©es
:::


{{< include applications/_application4.qmd >}}


# IV- Environnements reproductibles

## ExpÃ©rience de pensÃ©e

::: {.incremental}
- Imaginons la situation suivante :
  - J'installe une version de `R` sur mon poste ;
  - Je dÃ©veloppe un projet en installant les _packages_ nÃ©cessaires ;
  - Une fois terminÃ©, je passe au projet suivant, et ainsi de suite.


- Quels [**problÃ¨mes**]{.orange} puis-je rencontrer au fil des projets ?

- Est-il facile de [**partager**]{.orange} un de mes projets ?
:::

## Enjeux

- [**Version de**]{.orange} [**R**]{.blue2} [**fixe**]{.orange}, celle de l'installation systÃ¨me

. . .

- [**Conflits de version**]{.orange} : diffÃ©rents projets peuvent requÃ©rir diffÃ©rentes versions d'un mÃªme _package_.

. . .

- [**ReproductibilitÃ© limitÃ©e**]{.orange} : difficile de dire quel projet nÃ©cessite quel _package_.

. . .

- [**PortabilitÃ© limitÃ©e**]{.orange} : difficile de prÃ©ciser dans un fichier les dÃ©pendances spÃ©cifiques Ã  un projet.


## Des environnements reproductibles avec `renv`

- `renv` permet de crÃ©er des **env**ironnements **r**eproductibles

. . .

- [**Isolation**]{.orange} : chaque projet dispose de sa propre librairie de packages

. . .

- [**ReproductibilitÃ©**]{.orange} : `renv` enregistre les versions exactes des *packages* nÃ©cessaires au projet

. . .

- [**PortabilitÃ©**]{.orange}: un tiers peut exÃ©cuter le projet avec les mÃªmes spÃ©cifications

## Utilisation de `renv`

1. [**Initialisation**]{.orange} (`init`) de l'environnement local du projet

. . .

2. [**DÃ©veloppement**]{.orange} du projet

. . .

3. [**Enregistrement**]{.orange} (`snapshot`) des versions des *packages* installÃ©s

. . .

4. [**Restauration**]{.orange} (`restore`) d'un environnement

## :one: Initialisation de l'environnement

::: {.incremental}
- `renv::init()` dans un projet RStudio crÃ©e :
  - Un dossier `renv` et le fichier `.Rprofile` : activation automatique de l'environnement
  - Le fichier `renv.lock` : versions des *packages* installÃ©s
:::

. . .

![](img/renv_init.png){height="400" fig-align="center"}

## :two: DÃ©veloppement du projet

::: {.incremental}
- Une fois l'environnement initialisÃ©, on dÃ©veloppe le projet de maniÃ¨re habituelle :
  - Installations/suppressions/mises Ã  jour de packages
  - Ecriture de scripts
:::

. . .

- `renv::status()` : indique les _packages_ installÃ©s/supprimÃ©s par rapport au fichier `renv.lock`

## :three: Enregistrement de l'environnement {.smaller}

- `renv::snapshot()` : enregistre les versions des _packages_ installÃ©s dans le fichier `renv.lock`

. . .

![](img/renv_snapshot.png){height="400" fig-align="center"}

## :four: Restauration de l'environnement

- `renv::restore()` : installe/dÃ©sinstalle les _packages_ nÃ©cessaires pour arriver Ã  l'Ã©tat spÃ©cifiÃ© dans le fichier `renv.lock`

. . .

- [**PortabilitÃ©**]{.orange} : un tiers peut recrÃ©er un environnement avec les mÃªmes spÃ©cifications


{{< include applications/_application5.qmd >}}


## Vers une reproductibilitÃ© optimale

::: {.incremental}
- [**Limites**]{.orange} des environnements virtuels : 
  - Les [**librairies systÃ¨me**]{.blue2} ne sont pas gÃ©rÃ©es
  - Lourdeur de la phase d'installation Ã  chaque changement d'environnement
  - Peu adaptÃ©s Ã  un environnement de production
:::

. . .

- La [**conteneurisation**]{.orange} (ex : `Docker`) apporte la solution

. . .

- [**Intuition**]{.orange} : au lieu de distribuer la recette pour recrÃ©er l'environnement, [**distribuer directement une "machine" qui contient *tout* l'environnement nÃ©cessaire au projet**]{.blue2}

## Ressources supplÃ©mentaires

- La [documentation officielle de `renv`](https://rstudio.github.io/renv/articles/renv.html)

- [Une prÃ©sentation sur `renv`](https://elise.maigne.pages.mia.inra.fr/2021_package_renv/presentation.html#1)

# V- *Pipelines* de donnÃ©es

## Motivations

- Une analyse de donnÃ©es ou une chaÃ®ne de production font intervenir des [**Ã©tapes standardisÃ©es**]{.orange}

![](https://astrakhan.fr/wp-content/uploads/2020/10/Data-Engineering.png)

[Source](https://astrakhan.fr/blog/formation-au-data-engineering-une-nouvelle-offre-dastrakhan/)

## Motivations

- Une analyse de donnÃ©es ou une chaÃ®ne de production font intervenir des [**Ã©tapes standardisÃ©es**]{.orange}

::: {.incremental}
- ModÃ©liser ces Ã©tapes sous forme de [**pipeline (*direct acyclic graph*)**]{.orange} a plusieurs avantages :
  - [**DÃ©couplage**]{.blue2} des diffÃ©rentes Ã©tapes
  - Facilite la [**planification**]{.blue2} du traitement
  - Facilite la [**prise en main**]{.blue2} du projet par un tiers
:::

## `targets`

- `targets` est un *framework* de modÃ©lisation de *pipelines* spÃ©cifiquement dÃ©diÃ© aux projets `R`.

::: {.incremental}
- Deux objectifs majeurs : 
  1. [**RÃ©duire le coÃ»t d'expÃ©rimentation**]{.orange} en sauvegardant les rÃ©sultats intermÃ©diaires (***targets***)
  2. Garantir la [**reproductibilitÃ©**]{.orange} de la chaÃ®ne en traÃ§ant les changements de ces ***targets***
:::


## :one: Un projet minimaliste

- DonnÃ©es et scripts `R`,
- Un nouveau fichier: `_targets.R`
    + ContrÃ´le le comportement de notre chaine de traitement

```
â”œâ”€â”€ _targets.R
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ raw
â”‚   â”‚   â””â”€â”€ data.csv
â”œâ”€â”€ R
â”‚   â””â”€â”€ functions.R
```

## :two: Le fichier `_targets.R` {.smaller}

::: {.incremental}
- Le fichier `_targets.R` doit satisfaire plusieurs conditions :
  1. Charger le _package_ `targets` ;
  2. Charger dans l'environnement les fonctions nÃ©cessaires ;
  3. DÃ©clarer les _packages_ nÃ©cessaires aux diffÃ©rentes Ã©tapes ;
  4. DÃ©finir le *pipeline*.
:::

. . . 

```r
# _targets.R file
library(targets)
source("R/functions.R")
tar_option_set(packages = c("readr", "dplyr", "ggplot2"))
list(
  tar_target(file, "data.csv", format = "file"),
  tar_target(data, get_data(file)),
  tar_target(model, fit_model(data)),
  tar_target(plot, plot_model(model, data))
)
```

::: {.callout-note}
Les fonctions `get_data`, `fit_model` et `plot_model` sont dÃ©finies
dans ğŸ“ `R/functions.R`
:::

## :three: Inspecter le *pipeline*

- La fonction `tar_visnetwork` permet de visualiser le *pipeline*

![](img/pipeline.png){height="350" fig-align="center"}

## :three: ExÃ©cuter le *pipeline* {.smaller}

- La fonction `tar_make` exÃ©cute le *pipeline* dÃ©fini dans `_targets.R`

![](img/pipeline_run1.png){height="200" fig-align="center"}

- ğŸ’¡ Lors des exÃ©cutions suivantes, `targets` saute automatiquement les Ã©tapes qui n'ont pas changÃ©

![](img/pipeline_run2.png){height="150" fig-align="center"}

## Ressources supplÃ©mentaires

- La [documentation officielle de `targets`](https://books.ropensci.org/targets/)

- La [fiche UtilitR dÃ©diÃ©e Ã  `targets`](https://www.book.utilitr.org/targets.html)


{{< include applications/_application6.qmd >}}



# VI- Publication reproductible

## Enjeux

- Produire des [**Ã©tudes reproductibles**]{.orange} en intÃ©grant le code et le texte dans un mÃªme document

. . .

- La gÃ©nÃ©ration complÃ¨te de l'Ã©tude est contenue dans un [**unique projet**]{.orange}

. . .

- [**Limiter les risques d'erreurs**]{.orange} dues aux gestes manuels

. . .

- Gestion native de [**diffÃ©rents formats**]{.orange} pour le document final (`pdf`, `html`, `odt`, etc.)

## `R Markdown`

::: {.incremental}
- `R Markdown` est un *package* `R` qui permet de lier
  - Du [**texte**]{.orange} au format `Markdown`
  - Du [**code**]{.orange} `R` qui peut Ãªtre exÃ©cutÃ© et dont les sorties peuvent Ãªtre intÃ©grÃ©es au texte
:::

. . .

- [**Dissociation du fond et de la forme**]{.orange} du document

::: {.incremental}
- Un document est [**compilÃ©**]{.orange} en deux Ã©tapes
  - [***knit***]{.green2} : le package `knitr` transforme le texte et les sorties `R` en un document `Markdown` standard ;
  - [***convert***]{.green2} : le logiciel `pandoc` transforme le document `.md` en un format de sortie standard (`html`, `pdf`, etc.)
:::

## `Quarto`

- `Quarto` est le successeur de `R Markdown`

. . .

- `Quarto` supporte [**diffÃ©rents moteurs de calcul**]{.orange} (`knitr`, `Jupyter`, `Observable`..) ce qui le rend nativement [**multi-langage**]{.orange} (`R`, `Python`, `JavaScript`..)

. . .

- Le fonctionnement des deux systÃ¨mes reste trÃ¨s proche

## Anatomie d'un document reproductible

![](img/qmd.png){height="500" fig-align="center"}

## Ressources supplÃ©mentaires

- La [documentation officielle de `R Markdown`](https://rmarkdown.rstudio.com/lesson-1.html)

- La [fiche `UtilitR` sur `R Markdown`](https://www.book.utilitr.org/rmarkdown.html)

- La [documentation officielle de `quarto`](https://quarto.org/)


{{< include applications/_application7.qmd >}}



# Conclusion

- Les [**bonnes pratiques**]{.blue2} favorisent la [**reproductibilitÃ©**]{.orange} et la [**rÃ©utilisation**]{.orange} des projets statistiques

. . .

- Des [**outils**]{.orange} permettent d'appliquer les [**bonnes pratiques**]{.blue2}

. . .

- Le [**coÃ»t**]{.orange} est d'autant plus faible que l'on se place [**en amont du projet**]{.orange}

. . .

- Quel [**socle**]{.orange} de [**bonnes pratiques**]{.blue2} pour l'Insee ?
